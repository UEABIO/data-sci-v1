<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 10 Data Insights part one | 5023Y</title>
<meta name="author" content="Philip T. Leftwich">
<meta name="description" content="In these last chapters we are concentrating on generating insights into our data using visualisations and descriptive statistics. The easiest way to do this is to use questions as tools to guide...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 10 Data Insights part one | 5023Y">
<meta property="og:type" content="book">
<meta property="og:url" content="https://ueabio.github.io/data-sci/data-insights-part-one.html">
<meta property="og:image" content="https://ueabio.github.io/data-sci/images/logos/twitter_card.png">
<meta property="og:description" content="In these last chapters we are concentrating on generating insights into our data using visualisations and descriptive statistics. The easiest way to do this is to use questions as tools to guide...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 10 Data Insights part one | 5023Y">
<meta name="twitter:description" content="In these last chapters we are concentrating on generating insights into our data using visualisations and descriptive statistics. The easiest way to do this is to use questions as tools to guide...">
<meta name="twitter:image" content="https://ueabio.github.io/data-sci/images/logos/twitter_card.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.13/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1.9000/transition.js"></script><script src="libs/bs3compat-0.3.1.9000/tabs.js"></script><script src="libs/bs3compat-0.3.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/font-awesome-5.13.0/js/script.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script language="javascript"> 
        function toggle(id) {
            var ele = document.getElementById("toggleText" + id);
            var text = document.getElementById("displayText" + id);
            var buttonText = text.innerHTML.replace("Show ", "");
            buttonText = buttonText.replace("Hide ", "");
            if(ele.style.display == "block") {
                ele.style.display = "none";
                text.innerHTML = "Show " + buttonText;
            } else {
                ele.style.display = "block";
                text.innerHTML = "Hide " + buttonText;
            }
        } 
    </script><script language="javascript">
        function openCode(evt, codeName, id) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent" + id);
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks" + id);
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(codeName).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script><script language="javascript">
        function hide(id){
            document.getElementById(id).style.display = "none";
        }
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Data Science for Biologists">5023Y</a>:
        <small class="text-muted">Data Science for Biologists</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li class="book-part">R Programming</li>
<li><a class="" href="introduction-to-r-and-rstudio.html"><span class="header-section-number">1</span> Introduction to R and RStudio</a></li>
<li><a class="" href="basic-programming.html"><span class="header-section-number">2</span> Basic programming</a></li>
<li><a class="" href="loading-data.html"><span class="header-section-number">3</span> Loading data</a></li>
<li><a class="" href="data-wrangling-part-one.html"><span class="header-section-number">4</span> Data wrangling part one</a></li>
<li><a class="" href="data-wrangling-part-two.html"><span class="header-section-number">5</span> Data wrangling part two</a></li>
<li><a class="" href="data-visualisation-with-ggplot2.html"><span class="header-section-number">6</span> Data visualisation with ggplot2</a></li>
<li><a class="" href="markdown.html"><span class="header-section-number">7</span> Markdown</a></li>
<li><a class="" href="github.html"><span class="header-section-number">8</span> Github</a></li>
<li><a class="" href="functions-and-iteration.html"><span class="header-section-number">9</span> Functions and Iteration</a></li>
<li><a class="active" href="data-insights-part-one.html"><span class="header-section-number">10</span> Data Insights part one</a></li>
<li><a class="" href="data-insights-part-two.html"><span class="header-section-number">11</span> Data insights part two</a></li>
<li class="book-part">Statistics</li>
<li><a class="" href="introduction-to-statistics.html"><span class="header-section-number">12</span> Introduction to statistics</a></li>
<li><a class="" href="introduction-to-linear-models.html"><span class="header-section-number">13</span> Introduction to Linear Models</a></li>
<li><a class="" href="testing.html"><span class="header-section-number">14</span> Testing</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">15</span> Regression</a></li>
<li><a class="" href="anova.html"><span class="header-section-number">16</span> ANOVA</a></li>
<li><a class="" href="multivariate-linear-models.html"><span class="header-section-number">17</span> Multivariate linear models</a></li>
<li><a class="" href="complex-models.html"><span class="header-section-number">18</span> Complex models</a></li>
<li><a class="" href="generalized-linear-models.html"><span class="header-section-number">19</span> Generalized Linear Models</a></li>
<li class="book-part">Advanced topics</li>
<li><a class="" href="mixed-models.html"><span class="header-section-number">20</span> Mixed models</a></li>
<li><a class="" href="generalised-additive-models.html"><span class="header-section-number">21</span> Generalised Additive Models</a></li>
<li><a class="" href="survival-models.html"><span class="header-section-number">22</span> Survival models</a></li>
<li><a class="" href="unsupervised-machine-learning.html"><span class="header-section-number">23</span> Unsupervised Machine Learning</a></li>
<li><a class="" href="power-analysis.html"><span class="header-section-number">24</span> Power analysis</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="installing-r.html"><span class="header-section-number">A</span> Installing R</a></li>
<li><a class="" href="updating-r-rstudio-and-packages.html"><span class="header-section-number">B</span> Updating R, RStudio, and packages</a></li>
<li><a class="" href="exporting-files-from-the-server.html"><span class="header-section-number">C</span> Exporting files from the server</a></li>
<li><a class="" href="symbols.html"><span class="header-section-number">D</span> Symbols</a></li>
<li><a class="" href="baser.html"><span class="header-section-number">E</span> Base R vs. Tidyverse</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/UEABIO/data-sci-v1">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-insights-part-one" class="section level1" number="10">
<h1>
<span class="header-section-number">10</span> Data Insights part one<a class="anchor" aria-label="anchor" href="#data-insights-part-one"><i class="fas fa-link"></i></a>
</h1>
<p>In these last chapters we are concentrating on generating insights into our data using visualisations and descriptive statistics. The easiest way to do this is to use questions as tools to guide your investigation. When you ask a question, the question focuses your attention on a specific part of your dataset and helps you decide which graphs, models, or transformations to make.</p>
<p>For this exercise we will propose that our task is to generate insights into the body mass of our penguins, in order to answer the question</p>
<ul>
<li>How is body mass associated with bill length and depth in penguins?</li>
</ul>
<p>In order to answer this question properly we should first understand our different variables and how they might relate to each other.</p>
<ul>
<li>Distribution of data types</li>
<li>Central tendency</li>
<li>Relationship between variables</li>
<li>Confounding variables</li>
</ul>
<p>This inevitably leads to more and a variety of questions. Each new question that you ask will expose you to a <em>new aspect</em> of your data.</p>
<div id="data-wrangling" class="section level3" number="10.0.1">
<h3>
<span class="header-section-number">10.0.1</span> Data wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"><i class="fas fa-link"></i></a>
</h3>
<p>Importantly you should have already generated an understanding of the variables contained within your dataset during the <a href="data-wrangling-part-one.html#data-wrangling-part-one">data wrangling</a> steps. Including:</p>
<ul>
<li><p>The number of variables</p></li>
<li><p>The data format of each variable</p></li>
<li><p>Checked for missing data</p></li>
<li><p>Checked for typos, duplications or other data errors</p></li>
<li><p>Cleaned column or factor names</p></li>
</ul>
<div class="warning">
<p>
It is very important to not lose site of the questions you are asking
</p>
<p>
You should also play close attention to the data, and remind yourself <strong>frequently</strong> how many variables do you have and what are their names?
</p>
<p>
How many rows/observations do you have?
</p>
<p>
Pay close attention to the outputs, errors and warnings from the R console.
</p>
</div>
</div>
<div id="variable-types" class="section level2" number="10.1">
<h2>
<span class="header-section-number">10.1</span> Variable types<a class="anchor" aria-label="anchor" href="#variable-types"><i class="fas fa-link"></i></a>
</h2>
<p>A quick refresher:</p>
<div id="numerical" class="section level3" number="10.1.1">
<h3>
<span class="header-section-number">10.1.1</span> Numerical<a class="anchor" aria-label="anchor" href="#numerical"><i class="fas fa-link"></i></a>
</h3>
<p>You <strong>should</strong> already be familiar with the concepts of numerical and categorical data. <strong>Numeric</strong> variables have values that describe a measure or quantity. This is also known as quantitative data. We can subdivide numerical data further:</p>
<ul>
<li>
<strong>Continuous numeric variables.</strong> This is where observations can take any value within a range of numbers. Examples might include body mass (g), age, temperature or flipper length (mm).
While in theory these values can have any numbers, within a dataset they are likely bounded (set within a minimum/maximum of observed or measurable values), and the accuracy may only be as precise as the measurement protocol allows.</li>
</ul>
<p>In a tibble these will be represented by the header <code>&lt;dbl&gt;</code>.</p>
<ul>
<li>
<strong>Discrete numeric variables</strong> Observations are numeric but restricted to <em>whole values</em> e.g. 1,2,3,4,5 etc. These are also known as <strong>integers</strong>. Discrete variables could include the number of individuals in a population, number of eggs laid etc. Anything where it would make no sense to describe in fractions e.g. a penguin cannot lay 2 and a half eggs. Counting!</li>
</ul>
<p>In a tibble these will be represented by the header <code>&lt;int&gt;</code>.</p>
</div>
<div id="categorical" class="section level3" number="10.1.2">
<h3>
<span class="header-section-number">10.1.2</span> Categorical<a class="anchor" aria-label="anchor" href="#categorical"><i class="fas fa-link"></i></a>
</h3>
<p>Values that describe a characteristic of data such as 'what type' or 'which category'. Categorical variables are mutually exclusive - one observation should not be able to fall into two categories at once - and should be exhaustive - there should not be data which does not <em>fit</em> a category (not the same as NA - not recorded). Categorical variables are qualitative, and often represented by non-numeric values such as words. It's a bad idea to represent categorical variables as numbers (R won't treat it correctly). Categorical variables can be defined further as:</p>
<ul>
<li><p><strong>Nominal variables</strong> Observations that can take values that are not logically ordered. Examples include Species or Sex in the Penguins data.
In a tibble these will be represented by the header <code>&lt;chr&gt;</code>.</p></li>
<li><p><strong>Ordinal variables</strong> Observations can take values that can be logically ordered or ranked. Examples include - activity levels (sedentary, moderately active, very active); size classes (small, medium, large).</p></li>
</ul>
<p>These will have to be coded manually see <a href="data-wrangling-part-two.html#factors">Factors</a>, and will then be represented in a tibble by the header <code>&lt;fct&gt;</code></p>
<p>It is important to order Ordinal variables in the their logical order value when plotting data visuals or tables. Nominal variables are more flexible and could be ordered in whatever pattern works best for your data ( by default they will plot alphabetically, but perhaps you could order them according to the values of another numeric variable).</p>
</div>
</div>
<div id="quick-view-of-variables" class="section level2" number="10.2">
<h2>
<span class="header-section-number">10.2</span> Quick view of variables<a class="anchor" aria-label="anchor" href="#quick-view-of-variables"><i class="fas fa-link"></i></a>
</h2>
<p>Let's take a look at some of our variables, these functions will give a quick snapshot overview.</p>
<div class="sourceCode" id="cb274"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></code></pre></div>
<p>We can see that bill length contains numbers, and that many of these are fractions, but only down to 0.1mm. By comparison body mass all appear to be discrete number variables. Does this make body mass an integer? The underlying quantity (bodyweight) is clearly continuous, it is clearly possible for a penguin to weigh 3330.7g but it might <em>look</em> like an integer because of the way it was measured. This illustrates the importance of understanding the the type of variable you are working with - just looking at the values isn't enough.</p>
<p>On the other hand, how we choose to measure and record data <em>can</em> change the way it is presented in a dataset. If the researchers had decided to simply record small, medium and large classes of bodyweight, then we would be dealing with ordinal categorical variables (factors). These distinctions can become less clear if we start to deal with multiple classes of ordinal categories - for example if the researchers were measuring body mass to the nearest 10g. It might be reasonable to treat these as integers...</p>
</div>
<div id="categorical-variables" class="section level2" number="10.3">
<h2>
<span class="header-section-number">10.3</span> Categorical variables<a class="anchor" aria-label="anchor" href="#categorical-variables"><i class="fas fa-link"></i></a>
</h2>
<div id="frequency" class="section level3" number="10.3.1">
<h3>
<span class="header-section-number">10.3.1</span> Frequency<a class="anchor" aria-label="anchor" href="#frequency"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb275"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
species
</th>
<th style="text-align:right;">
n
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Adelie
</td>
<td style="text-align:right;">
152
</td>
</tr>
<tr>
<td style="text-align:left;">
Chinstrap
</td>
<td style="text-align:right;">
68
</td>
</tr>
<tr>
<td style="text-align:left;">
Gentoo
</td>
<td style="text-align:right;">
124
</td>
</tr>
</tbody>
</table></div>
</div>
<p>It might be useful for us to make some quick data summaries here, like relative frequency</p>
<div class="sourceCode" id="cb276"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">prob_obs_species</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prob_obs <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>

<span class="va">prob_obs_species</span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
species
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
prob_obs
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Adelie
</td>
<td style="text-align:right;">
152
</td>
<td style="text-align:right;">
0.4418605
</td>
</tr>
<tr>
<td style="text-align:left;">
Chinstrap
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
0.1976744
</td>
</tr>
<tr>
<td style="text-align:left;">
Gentoo
</td>
<td style="text-align:right;">
124
</td>
<td style="text-align:right;">
0.3604651
</td>
</tr>
</tbody>
</table></div>
</div>
<p>So about 44% of our sample is made up of observations from Adelie penguins. When it comes to making summaries about categorical data, that's about the best we can do, we can make observations about the most common categorical observations, and the relative proportions.</p>
<div class="sourceCode" id="cb277"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">species</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>This chart is ok - but can we make anything better?</p>
<p>We could go for a stacked bar approach</p>
<div class="sourceCode" id="cb278"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">""</span>,
             fill<span class="op">=</span><span class="va">species</span><span class="op">)</span><span class="op">)</span><span class="op">+</span> 
  <span class="co"># specify fill = species to ensure colours are defined by species</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position<span class="op">=</span><span class="st">"fill"</span><span class="op">)</span><span class="op">+</span> 
  <span class="co"># specify fill forces geom_bar to calculate percentages</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">)</span><span class="op">+</span> 
  <span class="co">#use scales package to turn y axis into percentages easily</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">""</span>,
       y<span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>This graph is OK <em>but not great</em>, the height of each section of the bar represents the relative proportions of each species in the dataset, but this type of chart becomes increasingly difficult to read as more categories are included. Colours become increasingly samey,and it is difficult to read where on the y-axis a category starts and stops, you then have to do some subtraction to work out the values.</p>
<p>The best graph is then probably the first one we made - with a few minor tweak we can rapidly improve this.</p>
<div class="inline-figure">
<img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;">
This is an example of a figure we might use in a report or paper. Having cleaned up the theme, added some simple colour, made sure our labels are clear and descriptive, ordered our categories in ascending frequency order, and included some simple text of percentages to aid readability.</div>
</div>
<div id="two-categorical-variables" class="section level3" number="10.3.2">
<h3>
<span class="header-section-number">10.3.2</span> Two categorical variables<a class="anchor" aria-label="anchor" href="#two-categorical-variables"><i class="fas fa-link"></i></a>
</h3>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Think about what might be a suitable confounding variable to investigate and graph here?
</div>
</div>
<p>Understanding how frequency is broken down by species and sex might be useful information to have.</p>
<div class="sourceCode" id="cb279"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prob_obs <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
species
</th>
<th style="text-align:left;">
sex
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
prob_obs
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Adelie
</td>
<td style="text-align:left;">
FEMALE
</td>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
0.4802632
</td>
</tr>
<tr>
<td style="text-align:left;">
Adelie
</td>
<td style="text-align:left;">
MALE
</td>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
0.4802632
</td>
</tr>
<tr>
<td style="text-align:left;">
Adelie
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.0394737
</td>
</tr>
<tr>
<td style="text-align:left;">
Chinstrap
</td>
<td style="text-align:left;">
FEMALE
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
0.5000000
</td>
</tr>
<tr>
<td style="text-align:left;">
Chinstrap
</td>
<td style="text-align:left;">
MALE
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
0.5000000
</td>
</tr>
<tr>
<td style="text-align:left;">
Gentoo
</td>
<td style="text-align:left;">
FEMALE
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
0.4677419
</td>
</tr>
<tr>
<td style="text-align:left;">
Gentoo
</td>
<td style="text-align:left;">
MALE
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
0.4919355
</td>
</tr>
<tr>
<td style="text-align:left;">
Gentoo
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.0403226
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div id="continuous-variables" class="section level2" number="10.4">
<h2>
<span class="header-section-number">10.4</span> Continuous variables<a class="anchor" aria-label="anchor" href="#continuous-variables"><i class="fas fa-link"></i></a>
</h2>
<div id="visualising-distributions" class="section level3" number="10.4.1">
<h3>
<span class="header-section-number">10.4.1</span> Visualising distributions<a class="anchor" aria-label="anchor" href="#visualising-distributions"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Variation</strong> is the tendency of the values of a variable to change from measurement to measurement. You can see variation easily in real life; if you measure any continuous variable twice, you will get two different results. This is true even if you measure quantities that are constant, like the speed of light. Each of your measurements will include a small amount of error that varies from measurement to measurement. Every variable has its own pattern of variation, which can reveal interesting information. The best way to understand that pattern is to visualise the distribution of the variableâ€™s values.</p>
<p>This is the script to plot a frequency distribution, we only specify an x variable, because we intend to plot a histogram, and the y variable is always the count of observations. Here we ask the data to be presented in 10 equally sized bins of data. In this case chopping the x axis range into 10 equal parts and counting the number of observations that fall within each one.</p>
<div class="sourceCode" id="cb280"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">body_mass_g</span><span class="op">)</span>,
                 bins<span class="op">=</span><span class="fl">10</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;"></div>
<div class="try">
<p>
Change the value specified to the bins argument and observe how the figure changes. It is usually a very good idea to try more than one set of bins in order to have better insights into the data
</p>
</div>
<p>To get the most out of your data, combine data you collected from the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function and the histogram here</p>
<ul>
<li><p>Which values are the most common? <select class="webex-select"><option value="blank"></option>
<option value="">&lt; 3500g</option>
<option value="answer">3500-4000g</option>
<option value="">4000-4500g</option>
<option value="">4500-5000g</option>
<option value="">5000-5500g</option>
<option value="">5500-6000g</option>
<option value="">&gt;6500g</option></select></p></li>
<li><p>Which values are rare? Why? Does that match your expectations?
<select class="webex-select"><option value="blank"></option>
<option value="">&lt; 3500g</option>
<option value="">3500-4000g</option>
<option value="">4000-4500g</option>
<option value="">4500-5000g</option>
<option value="">5000-5500g</option>
<option value="">5500-6000g</option>
<option value="answer">&gt;6500g</option></select></p></li>
<li><p>Can you see any unusual patterns? <select class="webex-select"><option value="blank"></option>
<option value="">Yes</option>
<option value="answer">No</option></select></p></li>
<li><p>How many observations are missing body mass information? <input class="webex-solveme nospaces" size="1" data-answer='["2"]'></p></li>
</ul>
<button id="displayTextunnamed-chunk-14" onclick="javascript:toggle('unnamed-chunk-14');">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-14" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<p>Penguins weighing less than 3kg and more than 6kg are rare.
The most common weight appears to be just under 4kg.</p>
There appear to be more data points to the right of the peak of the histogram than there are too the left. E.g. the histogram is not symmetrical. But there is no evidence for any extreme outliers.
</div>
</div>
</div>
<div id="atypical-values" class="section level4" number="10.4.1.1">
<h4>
<span class="header-section-number">10.4.1.1</span> Atypical values<a class="anchor" aria-label="anchor" href="#atypical-values"><i class="fas fa-link"></i></a>
</h4>
<p>If you found atypical values at this point, you could decide to exclude them from the dataset (using <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>). BUT you should only do this at this stage if you have a very strong reason for believing this is a mistake in the data entry, rather than a true outlier.</p>
</div>
</div>
<div id="central-tendency" class="section level3" number="10.4.2">
<h3>
<span class="header-section-number">10.4.2</span> Central tendency<a class="anchor" aria-label="anchor" href="#central-tendency"><i class="fas fa-link"></i></a>
</h3>
<p>Central tendency is a descriptive summary of a dataset through a single value that reflects the center of the data distribution. The three most widely used measures of central tendency are <strong>mean</strong>, <strong>median</strong> and <strong>mode</strong>.</p>
<p>The <strong>mean</strong> is defined as the sum of all values of the variable divided by the total number of values. The <strong>median</strong> is the middle value. If N is odd and if N is even, it is the average of the two middle values. The <strong>mode</strong> is the most frequently occurring observation in a data set, but is arguable least useful for understanding biological datasets.</p>
<p>We can find both the mean and median easily with the summarise function. The <strong>mean</strong> is usually the best measure of central tendency when the distribution is symmetrical, and the <strong>mode</strong> is the best measure when the distribution is asymmetrical/skewed.</p>
<div class="sourceCode" id="cb281"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguin_body_mass_summary</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_body_mass<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, 
              sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,
              median_body_mass<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, 
              iqr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>

<span class="va">penguin_body_mass_summary</span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:right;">
mean_body_mass
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
median_body_mass
</th>
<th style="text-align:right;">
iqr
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:right;">
4201.754
</td>
<td style="text-align:right;">
801.9545
</td>
<td style="text-align:right;">
4050
</td>
<td style="text-align:right;">
1200
</td>
</tr></tbody>
</table></div>
</div>
<div class="sourceCode" id="cb282"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> 
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">body_mass_g</span><span class="op">)</span>,
               alpha<span class="op">=</span><span class="fl">0.8</span>,
               bins <span class="op">=</span> <span class="fl">10</span>,
               fill<span class="op">=</span><span class="st">"steelblue"</span>,
               colour<span class="op">=</span><span class="st">"darkgrey"</span><span class="op">)</span><span class="op">+</span>
   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">penguin_body_mass_summary</span>,
             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>xintercept<span class="op">=</span><span class="va">mean_body_mass</span><span class="op">)</span>,
             colour<span class="op">=</span><span class="st">"red"</span>,
             linetype<span class="op">=</span><span class="st">"dashed"</span><span class="op">)</span><span class="op">+</span>
     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">penguin_body_mass_summary</span>,
             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>xintercept<span class="op">=</span><span class="va">median_body_mass</span><span class="op">)</span>,
             colour<span class="op">=</span><span class="st">"black"</span>,
             linetype<span class="op">=</span><span class="st">"dashed"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Body mass (g)"</span>,
       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-16"></span>
<img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-16-1.png" alt="Red dashed line represents the mean, Black dashed line is the median value" width="100%"><p class="caption">
Figure 10.1: Red dashed line represents the mean, Black dashed line is the median value
</p>
</div>
</div>
<div id="normal-distribution" class="section level3" number="10.4.3">
<h3>
<span class="header-section-number">10.4.3</span> Normal distribution<a class="anchor" aria-label="anchor" href="#normal-distribution"><i class="fas fa-link"></i></a>
</h3>
<p>From our histogram we can likely already tell whether we have normally distributed data.</p>
<div class="info">
<p>
Normal distribution, also known as the "Gaussian distribution", is a probability distribution that is symmetric about the mean, showing that data near the mean are more frequent in occurrence than data far from the mean. In graphical form, the normal distribution appears as a "bell curve".
</p>
</div>
<p>If our data follows a normal distribution, then we can predict the spread of our data, and the likelihood of observing a datapoint of any given value with only the mean and standard deviation.</p>
<p>Here we can simulate what a normally distributed dataset would look like with our sample size, mean and standard deviation.</p>
<div class="sourceCode" id="cb283"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">norm_mass</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">344</span>,
      mean <span class="op">=</span> <span class="fl">4201.754</span>,
      sd <span class="op">=</span> <span class="fl">801.9545</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">norm_mass</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">value</span><span class="op">)</span>,
                 bins <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;"></div>
<div id="qq-plot" class="section level4" number="10.4.3.1">
<h4>
<span class="header-section-number">10.4.3.1</span> QQ-plot<a class="anchor" aria-label="anchor" href="#qq-plot"><i class="fas fa-link"></i></a>
</h4>
<p>A QQ plot is a classic way of checking whether a sample distribution is the same as another (or theoretical distribution). They look a bit odd at first, but they are actually fairly easy to understand, and very useful! The qqplot distributes your data on the y-axis, and a theoretical normal distribution on the x-axis. If the residuals follow a normal distribution, they should meet to produce a perfect diagonal line across the plot.</p>
<p>Watch this video to see <a href="https://www.youtube.com/watch?v=okjYjClSjOg">QQ plots explained</a></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-19"></span>
<img src="images/qq_example.png" alt="Examples of qqplots with different deviations from a normal distribution" width="80%"><p class="caption">
Figure 10.2: Examples of qqplots with different deviations from a normal distribution
</p>
</div>
<p>In our example we can see that <em>most</em> of our residuals can be explained by a normal distribution, except at the low end of our data.</p>
<p>So the fit is not perfect, but it is also not terrible!</p>
<div class="sourceCode" id="cb284"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html">stat_qq</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html">stat_qq_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-20-1.png" width="100%" style="display: block; margin: auto;"></div>
<p><strong>How do we know how much deviation from an idealised distribution is ok?</strong></p>
<div class="sourceCode" id="cb285"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/qqPlot.html">qqPlot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-21-1.png" width="100%" style="display: block; margin: auto;"></div>
<pre><code>## [1] 170 186</code></pre>
<p>The qqPlot() function from the R package car provides 95% confidence interval margins to help you determine how severely your quantiles deviate from your idealised distribution.</p>
<p>With the information from the qqPlot which section of the distribution deviates most clearly from a normal distribution <select class="webex-select"><option value="blank"></option>
<option value="answer">&lt;3500g</option>
<option value="">3500-4000g</option>
<option value="">4000-4500g</option>
<option value="">5000-5500g</option>
<option value="">&gt;5500g</option></select></p>
<button id="displayTextunnamed-chunk-22" onclick="javascript:toggle('unnamed-chunk-22');">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-22" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
There are is a 'truncated' left tail of our normal distribution. We would predict more penguins with body masses lower than 3000g under the normal distribution.
</div>
</div>
</div>
</div>
</div>
<div id="variation" class="section level3" number="10.4.4">
<h3>
<span class="header-section-number">10.4.4</span> Variation<a class="anchor" aria-label="anchor" href="#variation"><i class="fas fa-link"></i></a>
</h3>
<p>Dispersion (how spread out the data is) is an important component towards understanding any numeric variable. While measures of central tendency are used to estimate the central value of a dataset, measures of dispersion are important for describing the spread of data.</p>
<p>Two data sets can have an equal mean (that is, measure of central tendency) but vastly different variability.</p>
<p>Important measures for dispersion are <strong>range</strong>, <strong>interquartile range</strong>, <strong>variance</strong> and <strong>standard deviation</strong>.</p>
<ul>
<li><p>The <strong>range</strong> is defined as the difference between the highest and lowest values in a dataset. The disadvantage of defining range as a measure of dispersion is that it does not take into account all values for calculation.</p></li>
<li><p>The <strong>interquartile range</strong> is defined as the difference between the third quartile denoted by ð‘¸_ðŸ‘ and the lower quartile denoted by ð‘¸_ðŸ . 75% of observations lie below the third quartile and 25% of observations lie below the first quartile.</p></li>
<li><p><strong>Variance</strong> is defined as the sum of squares of deviations from the mean, divided by the total number of observations. The standard deviation is the positive square root of the variance. The <strong>standard deviation</strong> is preferred instead of variance as it has the same units as the original values.</p></li>
</ul>
<div id="interquartile-range" class="section level4" number="10.4.4.1">
<h4>
<span class="header-section-number">10.4.4.1</span> Interquartile range<a class="anchor" aria-label="anchor" href="#interquartile-range"><i class="fas fa-link"></i></a>
</h4>
<p>We used the IQR function in <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> to find the interquartile range of the body mass variable.</p>
<p>The IQR is also useful when applied to the summary plots 'box and whisker plots'. We can also calculate the values of the IQR margins, and add labels with <code>scales</code> <span class="citation"><a href="references.html#ref-R-scales" role="doc-biblioref">Wickham &amp; Seidel</a> (<a href="references.html#ref-R-scales" role="doc-biblioref">2020</a>)</span>.</p>
<div class="sourceCode" id="cb287"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>q_body_mass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">body_mass_g</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,
            quantile <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># scales package allows easy converting from data values to perceptual properties</span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:right;">
q_body_mass
</th>
<th style="text-align:left;">
quantile
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
3550
</td>
<td style="text-align:left;">
25%
</td>
</tr>
<tr>
<td style="text-align:right;">
4050
</td>
<td style="text-align:left;">
50%
</td>
</tr>
<tr>
<td style="text-align:right;">
4750
</td>
<td style="text-align:left;">
75%
</td>
</tr>
</tbody>
</table></div>
</div>
<p>We can see for ourselves the IQR is obtained by subtracting the body mass at tht 75% quantile from the 25% quantile (4750-3550 = 1200).</p>
</div>
<div id="standard-deviation" class="section level4" number="10.4.4.2">
<h4>
<span class="header-section-number">10.4.4.2</span> Standard deviation<a class="anchor" aria-label="anchor" href="#standard-deviation"><i class="fas fa-link"></i></a>
</h4>
<p>standard deviation (or <span class="math inline">\(s\)</span>) is a measure of how dispersed the data is in relation to the mean. Low standard deviation means data are clustered around the mean, and high standard deviation indicates data are more spread out. As such it makes sense only to use this when the mean is a good measure of our central tendency.</p>
<div class="info">
<p>
<span class="math inline"><span class="math inline">\(\sigma\)</span></span> = a known population standard deviation
</p>
<p>
<span class="math inline"><span class="math inline">\(s\)</span></span> = a sample standard deviation
</p>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
If we know we have a normal distribution, then we can use <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> to quickly produce a mean and standard deviation.
</div>
</div>
<button id="displayTextunnamed-chunk-26" onclick="javascript:toggle('unnamed-chunk-26');">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-26" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<pre><code>penguins %&gt;% 
  summarise(mean = mean(body_mass_g),
            sd = sd(body_mass_g),
            n = n())</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="visualising-dispersion" class="section level3" number="10.4.5">
<h3>
<span class="header-section-number">10.4.5</span> Visualising dispersion<a class="anchor" aria-label="anchor" href="#visualising-dispersion"><i class="fas fa-link"></i></a>
</h3>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-27"></span>
<img src="images/distribution_gif.gif" alt="Visualising dispersion with different figures" width="80%"><p class="caption">
Figure 10.3: Visualising dispersion with different figures
</p>
</div>
<div class="sourceCode" id="cb289"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">colour_fill</span> <span class="op">&lt;-</span> <span class="st">"darkorange"</span>
<span class="va">colour_line</span> <span class="op">&lt;-</span> <span class="st">"steelblue"</span>
<span class="va">lims</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">7000</span><span class="op">)</span>

<span class="va">body_weight_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span>
  
  <span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">""</span>,
             y<span class="op">=</span> <span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span> <span class="st">" "</span>,
       y <span class="op">=</span> <span class="st">"Mass (g)"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="va">lims</span><span class="op">)</span><span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">plot_1</span> <span class="op">&lt;-</span> <span class="fu">body_weight_plot</span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">colour_fill</span>,
               colour <span class="op">=</span> <span class="va">colour_line</span>,
               width <span class="op">=</span> <span class="fl">0.2</span>,
              shape <span class="op">=</span> <span class="fl">21</span><span class="op">)</span>

<span class="va">plot_2</span> <span class="op">&lt;-</span> <span class="fu">body_weight_plot</span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">colour_fill</span>,
               colour <span class="op">=</span> <span class="va">colour_line</span>,
               width <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span>

<span class="va">plot_3</span> <span class="op">&lt;-</span> <span class="va">penguin_body_mass_summary</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">" "</span>,
             y <span class="op">=</span> <span class="va">mean_body_mass</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,
           fill <span class="op">=</span> <span class="va">colour_fill</span>,
           colour <span class="op">=</span> <span class="va">colour_line</span>,
               width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguin_body_mass_summary</span>,
                <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">mean_body_mass</span> <span class="op">-</span> <span class="va">sd</span>,
                    ymax <span class="op">=</span> <span class="va">mean_body_mass</span> <span class="op">+</span> <span class="va">sd</span><span class="op">)</span>,
                colour <span class="op">=</span> <span class="va">colour_line</span>,
                width <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">" "</span>,
       y <span class="op">=</span> <span class="st">"Body mass (g)"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="va">lims</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span>


<span class="va">plot_1</span> <span class="op">+</span> <span class="va">plot_2</span> <span class="op">+</span> <span class="va">plot_3</span> </code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-28-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We now have several compact representations of the body_mass_g including a histogram, boxplot and summary calculations. You can <em>and should</em> generate the same summaries for your other numeric variables. These tables and graphs provide the detail you need to understand the central tendency and dispersion of numeric variables.</p>
</div>
<div id="drop_na" class="section level3" number="10.4.6">
<h3>
<span class="header-section-number">10.4.6</span> drop_na<a class="anchor" aria-label="anchor" href="#drop_na"><i class="fas fa-link"></i></a>
</h3>
<p>We first met <code>NA</code> back in <a href="data-wrangling-part-one.html#missing-values-na">Chapter 4</a> and you will hopefully have noticed, either here or in those previous chapters, that missing values <code>NA</code> can really mess up our calculations. There are a few different ways we can deal with missing data:</p>
<ul>
<li><p><code>drop_na()</code> on everything before we start. This runs the risk that we lose <strong>a lot</strong> of data as <em>every</em> row, with an NA in <em>any column</em> will be removed</p></li>
<li><p><code>drop_na()</code> on a particular variable. This is fine, but we should approach this cautiously - if we do this in a way where we write this data into a new object e.g. <code>penguins &lt;- penguins %&gt;% drop_na(body_mass_g)</code> then we have removed this data forever - perhaps we only want to drop those rows for a specific calculation - again they might contain useful information in other variables.</p></li>
<li><p><code>drop_na()</code> for a specific task - this is a more cautious approach <strong>but</strong> we need to be aware of another phenomena. Is the data <strong>missing at random</strong>? You might need to investigate <em>where</em> your missing values are in a dataset. Data that is truly <strong>missing at random</strong> can be removed from a dataset without introducing bias. However, if bad weather conditions meant that researchers could not get to a particular island to measure one set of penguins that data is <strong>missing not at random</strong> this should be treated with caution. If that island contained one particular species of penguin, it might mean we have complete data for only two out of three penguin species. There is nothing you can do about incomplete data other than be aware that data not missing at random could influence your distributions.</p></li>
</ul>
</div>
</div>
<div id="categorical-and-continuous-variables" class="section level2" number="10.5">
<h2>
<span class="header-section-number">10.5</span> Categorical and continuous variables<a class="anchor" aria-label="anchor" href="#categorical-and-continuous-variables"><i class="fas fa-link"></i></a>
</h2>
<p>Itâ€™s common to want to explore the distribution of a continuous variable broken down by a categorical variable.</p>
<div class="webex-solution">
<button>
Think about which other variables might affect body mass?
</button>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-29"></span>
<img src="images/body-mass-interaction.png" alt="Species and sex are both likely to affect body mass" width="80%"><p class="caption">
Figure 10.4: Species and sex are both likely to affect body mass
</p>
</div>
<p>So it is reasonable to think that perhaps either species or sex might affect the morphology of beaks directly - or that these might affect body mass (so that if there is a direct relationship between mass and beak length, there will also be an indirect relationship with sex or species).</p>
</div>
<p>The best and simplest place to start exploring these possible relationships is by producing simple figures.</p>
<p>Let's start by looking at the distribution of body mass by species.</p>
</div>
<div id="activity-1-produce-a-plot-which-allows-you-to-look-at-the-distribution-of-penguin-body-mass-observations-by-species" class="section level2" number="10.6">
<h2>
<span class="header-section-number">10.6</span> Activity 1: Produce a plot which allows you to look at the distribution of penguin body mass observations by species<a class="anchor" aria-label="anchor" href="#activity-1-produce-a-plot-which-allows-you-to-look-at-the-distribution-of-penguin-body-mass-observations-by-species"><i class="fas fa-link"></i></a>
</h2>
<button id="displayTextunnamed-chunk-30" onclick="javascript:toggle('unnamed-chunk-30');">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-30" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb290"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">jitter_plot</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>,
               y <span class="op">=</span> <span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">21</span>,
                fill <span class="op">=</span> <span class="va">colour_fill</span>,
                colour <span class="op">=</span> <span class="va">colour_line</span>,
                width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">box_plot</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>,
               y <span class="op">=</span> <span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">colour_fill</span>,
                colour <span class="op">=</span> <span class="va">colour_line</span>,
                width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">histogram_plot</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_mass_g</span>,
                       y <span class="op">=</span> <span class="va">..density..</span><span class="op">)</span>,
                   position <span class="op">=</span> <span class="st">"identity"</span>,
                   alpha <span class="op">=</span> <span class="fl">0.6</span>,
                colour <span class="op">=</span> <span class="va">colour_line</span><span class="op">)</span>

<span class="va">jitter_plot</span><span class="op">/</span><span class="va">box_plot</span><span class="op">/</span><span class="va">histogram_plot</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-55-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>So it is reasonable to think that perhaps either species or sex might affect body mass, and we can visualise this in a number of different ways. The last method, a density histogram, looks a little crowded now, so I will use the excellent <code>ggridges</code> package to help out</p>
</div>
</div>
</div>
</div>
<div id="ggridges" class="section level2" number="10.7">
<h2>
<span class="header-section-number">10.7</span> GGridges<a class="anchor" aria-label="anchor" href="#ggridges"><i class="fas fa-link"></i></a>
</h2>
<p>The package <code>ggridges</code> (<span class="citation"><a href="references.html#ref-R-ggridges" role="doc-biblioref">Wilke</a> (<a href="references.html#ref-R-ggridges" role="doc-biblioref">2021</a>)</span>) provides some excellent extra geoms to supplement <code>ggplot</code>. One if its most useful features is to to allow different groups to be mapped to the y axis, so that histograms are more easily viewed.</p>
<button id="displayTextunnamed-chunk-31" onclick="javascript:toggle('unnamed-chunk-31');">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-31" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb291"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggridges/">ggridges</a></span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_mass_g</span>, y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggridges</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">colour_fill</span>,
                colour <span class="op">=</span> <span class="va">colour_line</span>,
                alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-56-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
</div>
<p><strong>Q. Does each species have a data distribution that appears to be normally distributed?</strong></p>
<ul>
<li><p>Gentoo <select class="webex-select"><option value="blank"></option>
<option value="answer">Yes</option>
<option value="">No</option></select></p></li>
<li><p>Chinstrap <select class="webex-select"><option value="blank"></option>
<option value="answer">Yes</option>
<option value="">No</option></select></p></li>
<li><p>Adelie <select class="webex-select"><option value="blank"></option>
<option value="answer">Yes</option>
<option value="">No</option></select></p></li>
</ul>
<button id="displayTextunnamed-chunk-32" onclick="javascript:toggle('unnamed-chunk-32');">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-32" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb292"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html">group_split</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">map</span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">.x</span>, <span class="va">body_mass_g</span><span class="op">)</span> 
      <span class="op">%&gt;%</span> <span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/qqPlot.html">qqPlot</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-57-1.png" width="100%" style="display: block; margin: auto;"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-57-2.png" width="100%" style="display: block; margin: auto;"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-57-3.png" width="100%" style="display: block; margin: auto;"></p>
<pre><code>## [[1]]
## [1] 110 102
## 
## [[2]]
## [1] 38 39
## 
## [[3]]
## [1] 18 41</code></pre>
<p>While the Gentoo density plot appears to show two peaks, our qqplot indicates this does not deviate from what me might expect from a normal distribution. But we could still investigate whether there are "two populations" here.</p>
</div>
</div>
</div>
<div class="sourceCode" id="cb294"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> <span class="op">%&gt;%</span> <span class="va">drop_na</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_mass_g</span>, y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span>,
                        colour <span class="op">=</span> <span class="va">colour_line</span>,
                        alpha <span class="op">=</span> <span class="fl">0.8</span>,
                        bandwidth <span class="op">=</span> <span class="fl">175</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="10-Data-insights-part-1_files/figure-html/unnamed-chunk-33-1.png" width="100%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb295"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># try playing with the bandwidth argument - this behaves similar to binning which you should be familiar with from using geom_histogram</span></code></pre></div>
</div>
<div id="activity-2-test-yourself" class="section level2" number="10.8">
<h2>
<span class="header-section-number">10.8</span> Activity 2: Test yourself<a class="anchor" aria-label="anchor" href="#activity-2-test-yourself"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Question 1.</strong> Write down some insights you have made about the data and relationships you have observed. Compare these to the ones below. Do you agree with these? Did you miss any? What observations did you make that are <strong>not</strong> in the list below.</p>
<div class="webex-solution">
<button>
What data insights have you made?
</button>
<p>This is revealing some really interesting insights into the shape and distribution of body sizes in our penguin populations now.</p>
<p>For example:</p>
<ul>
<li><p>Gentoo penguins appear to show strong sexual dimorphism with almost all males being larger than females (little overlap on density curves).</p></li>
<li><p>Gentoo males and females are on average larger than the other two penguin species</p></li>
<li><p>Gentoo females have two distinct peaks of body mass.</p></li>
<li><p>Chinstrap penguins also show evidence of sexual dimorphism, though with greater overlap.</p></li>
<li><p>Adelie penguins have larger males than females on average, but a wide spread of male body mass, (possibly two groups?)</p></li>
</ul>
<p>Note how we are able to understand our data better, by spending time making data visuals. While descriptive data statistics (mean, median) and measures of variance (range, IQR, sd) are important. They are not substitutes for spending time thinking about data and making exploratory analyses.</p>
</div>
<p><strong>Question 2.</strong> Using <code>summarise</code> we can quickly calculate <span class="math inline">\(s\)</span> but can you replicate this by hand with <code>dplyr</code> functions? - do this for total <span class="math inline">\(s\)</span> (not by category).</p>
<ul>
<li><p>Residuals</p></li>
<li><p>Squared residuals</p></li>
<li><p>Sum of squares</p></li>
<li><p>Variance = SS/df</p></li>
<li><p><span class="math inline">\(s=\sqrt{Variance}\)</span></p></li>
</ul>
<button id="displayTextunnamed-chunk-34" onclick="javascript:toggle('unnamed-chunk-34');">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-34" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb296"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mean</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>

<span class="va">penguins</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>residuals <span class="op">=</span> <span class="op">(</span><span class="va">body_mass_g</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span><span class="op">)</span>,
           sqrd_resid <span class="op">=</span> <span class="va">residuals</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu">drop_na</span><span class="op">(</span><span class="va">sqrd_resid</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>sum_squares <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">sqrd_resid</span><span class="op">)</span>,
              variance <span class="op">=</span> <span class="va">sum_squares</span><span class="op">/</span><span class="op">(</span><span class="va">n</span><span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span>,
              sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">variance</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:right;">
sum_squares
</th>
<th style="text-align:right;">
variance
</th>
<th style="text-align:right;">
sd
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:right;">
219307697
</td>
<td style="text-align:right;">
641249.6
</td>
<td style="text-align:right;">
800.7806
</td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
</div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    license
  );
});
</script><div class="chapter-nav">
<div class="prev"><a href="functions-and-iteration.html"><span class="header-section-number">9</span> Functions and Iteration</a></div>
<div class="next"><a href="data-insights-part-two.html"><span class="header-section-number">11</span> Data insights part two</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li>
<a class="nav-link" href="#data-insights-part-one"><span class="header-section-number">10</span> Data Insights part one</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#data-wrangling"><span class="header-section-number">10.0.1</span> Data wrangling</a></li></ul>
</li>
<li>
<a class="nav-link" href="#variable-types"><span class="header-section-number">10.1</span> Variable types</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#numerical"><span class="header-section-number">10.1.1</span> Numerical</a></li>
<li><a class="nav-link" href="#categorical"><span class="header-section-number">10.1.2</span> Categorical</a></li>
</ul>
</li>
<li><a class="nav-link" href="#quick-view-of-variables"><span class="header-section-number">10.2</span> Quick view of variables</a></li>
<li>
<a class="nav-link" href="#categorical-variables"><span class="header-section-number">10.3</span> Categorical variables</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#frequency"><span class="header-section-number">10.3.1</span> Frequency</a></li>
<li><a class="nav-link" href="#two-categorical-variables"><span class="header-section-number">10.3.2</span> Two categorical variables</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#continuous-variables"><span class="header-section-number">10.4</span> Continuous variables</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#visualising-distributions"><span class="header-section-number">10.4.1</span> Visualising distributions</a></li>
<li><a class="nav-link" href="#central-tendency"><span class="header-section-number">10.4.2</span> Central tendency</a></li>
<li><a class="nav-link" href="#normal-distribution"><span class="header-section-number">10.4.3</span> Normal distribution</a></li>
<li><a class="nav-link" href="#variation"><span class="header-section-number">10.4.4</span> Variation</a></li>
<li><a class="nav-link" href="#visualising-dispersion"><span class="header-section-number">10.4.5</span> Visualising dispersion</a></li>
<li><a class="nav-link" href="#drop_na"><span class="header-section-number">10.4.6</span> drop_na</a></li>
</ul>
</li>
<li><a class="nav-link" href="#categorical-and-continuous-variables"><span class="header-section-number">10.5</span> Categorical and continuous variables</a></li>
<li><a class="nav-link" href="#activity-1-produce-a-plot-which-allows-you-to-look-at-the-distribution-of-penguin-body-mass-observations-by-species"><span class="header-section-number">10.6</span> Activity 1: Produce a plot which allows you to look at the distribution of penguin body mass observations by species</a></li>
<li><a class="nav-link" href="#ggridges"><span class="header-section-number">10.7</span> GGridges</a></li>
<li><a class="nav-link" href="#activity-2-test-yourself"><span class="header-section-number">10.8</span> Activity 2: Test yourself</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/UEABIO/data-sci-v1/blob/main/book/10-Data-insights-part-1.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/UEABIO/data-sci-v1/edit/main/book/10-Data-insights-part-1.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>5023Y</strong>: Data Science for Biologists" was written by Philip T. Leftwich. It was last built on 2022-09-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
