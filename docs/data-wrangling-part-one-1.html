<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 6 Data wrangling part one | 5023Y</title>

    <meta name="author" content="Philip T. Leftwich" />
  
   <meta name="description" content="This book ..." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Chapter 6 Data wrangling part one | 5023Y" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ueabio.github.io/data-sci" />
  <meta property="og:image" content="https://ueabio.github.io/data-sci/images/logos/twitter_card.png" />
  <meta property="og:description" content="This book ..." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Data wrangling part one | 5023Y" />
  
  <meta name="twitter:description" content="This book ..." />
  <meta name="twitter:image" content="https://ueabio.github.io/data-sci/images/logos/twitter_card.png" />
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/header-attrs-2.13/header-attrs.js"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.3.1.9000/transition.js"></script>
    <script src="libs/bs3compat-0.3.1.9000/tabs.js"></script>
    <script src="libs/bs3compat-0.3.1.9000/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/font-awesome-5.13.0/js/script.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
    <link rel="stylesheet" href="include/psyteachr.css" />
    <link rel="stylesheet" href="include/webex.css" />
    <link rel="stylesheet" href="include/style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Data Science for Biologists">5023Y</a>:
        <small class="text-muted">Data Science for Biologists</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="data-wrangling-part-one-1" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Data wrangling part one</h1>
<p>It may surprise you to learn that scientists actually spend far more time cleaning and preparing their data than they spend actually analysing it. This means completing tasks such as cleaning up bad values, changing the structure of dataframes, reducing the data down to a subset of observations, and producing data summaries.</p>
<p>Many people seem to operate under the assumption that the only option for data cleaning is the painstaking and time-consuming cutting and pasting of data within a spreadsheet program like Excel. We have witnessed students and colleagues waste days, weeks, and even months manually transforming their data in Excel, cutting, copying, and pasting data. Fixing up your data by hand is not only a terrible use of your time, but it is error-prone and not reproducible. Additionally, in this age where we can easily collect massive datasets online, you will not be able to organise, clean, and prepare these by hand.</p>
<p>In short, you will not thrive as a scientist if you do not learn some key data wrangling skills. Although every dataset presents unique challenges, there are some systematic principles you should follow that will make your analyses easier, less error-prone, more efficient, and more reproducible.</p>
<p>In this chapter you will see how data science skills will allow you to efficiently get answers to nearly any question you might want to ask about your data. By learning how to properly make your computer do the hard and boring work for you, you can focus on the bigger issues.</p>
<div id="load-your-workspace-1" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Load your workspace</h2>
<p>You should have a workspace ready to work with the Palmer penguins data. Load this workspace now.</p>
<p>Think about some basic checks before you start your work today.</p>
<div id="checklist-1" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Checklist</h3>
<ul>
<li><p>Are there objects already in your Enviroment pane? <a href="basic-programming.html#global-options">There shouldn't be</a>, if there are use <code>rm(list=ls())</code></p></li>
<li><p>Re-run your script from <a href="loading-data.html#activity-4-make-a-script">last time</a> from line 1 to the last line</p></li>
<li><p>Check for any warning or error messages</p></li>
<li><p>Add the code from today's session as we go</p></li>
</ul>
</div>
</div>
<div id="activity-1-change-column-names-1" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Activity 1: Change column names</h2>
<p>We are going to learn how to organise data using the <em>tidy</em> format<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. This is because we are using the <code>tidyverse</code> packages <span class="citation"><a href="references.html#ref-R-tidyverse" role="doc-biblioref">Wickham</a> (<a href="references.html#ref-R-tidyverse" role="doc-biblioref">2021</a>)</span>. This is an opinionated, but highly effective method for generating reproducible analyses with a wide-range of data manipulation tools. Tidy data is an easy format for computers to read.</p>
<p>Here 'tidy' refers to a specific structure that lets us manipulate and visualise data with ease. In a tidy dataset each <em>variable</em> is in one column and each row contains one <em>observation</em>. Each cell of the table/spreadsheet contains the <em>values</em>. One observation you might make about tidy data is it is quite long - it generates a lot of rows of data - you might remember then that <em>tidy</em> data can be referred to as <em>long</em>-format data (as opposed to <em>wide</em> data).</p>
<p><img src="images/tidy-1.png" title="tidy data overview" alt="tidy data overview" width="80%" style="display: block; margin: auto;" /></p>
<p>So we know our data is in R, and we know the columns and names have been imported. But we still don't know whether all of our values imported correctly, or whether it captured all the rows.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-wrangling-part-one-1.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CHECK DATA ----</span></span>
<span id="cb1-2"><a href="data-wrangling-part-one-1.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># check the data</span></span>
<span id="cb1-3"><a href="data-wrangling-part-one-1.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(penguins)</span>
<span id="cb1-4"><a href="data-wrangling-part-one-1.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#__________________________----</span></span></code></pre></div>
<p>When we run <code>colnames()</code> we get the identities of each column in our dataframe</p>
<ul>
<li><p><strong>Study name</strong>: an identifier for the year in which sets of observations were made</p></li>
<li><p><strong>Region</strong>: the area in which the observation was recorded</p></li>
<li><p><strong>Island</strong>: the specific island where the observation was recorded</p></li>
<li><p><strong>Stage</strong>: Denotes reproductive stage of the penguin</p></li>
<li><p><strong>Individual</strong> ID: the unique ID of the individual</p></li>
<li><p><strong>Clutch completion</strong>: if the study nest observed with a full clutch e.g. 2 eggs</p></li>
<li><p><strong>Date egg</strong>: the date at which the study nest observed with 1 egg</p></li>
<li><p><strong>Culmen length</strong>: length of the dorsal ridge of the bird's bill (mm)</p></li>
<li><p><strong>Culmen depth</strong>: depth of the dorsal ridge of the bird's bill (mm)</p></li>
<li><p><strong>Flipper Length</strong>: length of bird's flipper (mm)</p></li>
<li><p><strong>Body Mass</strong>: Bird's mass in (g)</p></li>
<li><p><strong>Sex</strong>: Denotes the sex of the bird</p></li>
<li><p><strong>Delta 15N</strong> : the ratio of stable Nitrogen isotopes 15N:14N from blood sample</p></li>
<li><p><strong>Delta 13C</strong>: the ratio of stable Carbon isotopes 13C:12C from blood sample</p></li>
</ul>
<div id="clean-column-names" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Clean column names</h3>
<p>Often we might want to change the names of our variables. They might be non-intuitive, or too long. Our data has a couple of issues:</p>
<ul>
<li><p>Some of the names contain spaces</p></li>
<li><p>Some of the names have capitalised letters</p></li>
<li><p>Some of the names contain brackets</p></li>
</ul>
<p>This dataframe does not like these so let's correct these quickly. R is case-sensitive and also doesn't like spaces or brackets in variable names</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-wrangling-part-one-1.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CLEAN DATA ----</span></span>
<span id="cb2-2"><a href="data-wrangling-part-one-1.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="data-wrangling-part-one-1.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># clean all variable names to snake_case using the clean_names function from the janitor package</span></span>
<span id="cb2-4"><a href="data-wrangling-part-one-1.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># note we are using assign &lt;- to overwrite the old version of penguins with a version that has updated names</span></span>
<span id="cb2-5"><a href="data-wrangling-part-one-1.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># this changes the data in our R workspace but NOT the original csv file</span></span>
<span id="cb2-6"><a href="data-wrangling-part-one-1.html#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="data-wrangling-part-one-1.html#cb2-7" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(penguins) <span class="co"># clean the column names</span></span>
<span id="cb2-8"><a href="data-wrangling-part-one-1.html#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="data-wrangling-part-one-1.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(penguins) <span class="co"># quickly check the new variable names</span></span></code></pre></div>
<pre><code>##  [1] &quot;study_name&quot;        &quot;sample_number&quot;     &quot;species&quot;          
##  [4] &quot;region&quot;            &quot;island&quot;            &quot;stage&quot;            
##  [7] &quot;individual_id&quot;     &quot;clutch_completion&quot; &quot;date_egg&quot;         
## [10] &quot;culmen_length_mm&quot;  &quot;culmen_depth_mm&quot;   &quot;flipper_length_mm&quot;
## [13] &quot;body_mass_g&quot;       &quot;sex&quot;               &quot;delta_15_n_o_oo&quot;  
## [16] &quot;delta_13_c_o_oo&quot;   &quot;comments&quot;</code></pre>
</div>
<div id="rename-columns-manually" class="section level3" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Rename columns (manually)</h3>
<p>The <code>clean_names</code> function quickly converts all variable names into snake case. The N and C blood isotope ratio names are still quite long though, so let's clean those with <code>dplyr::rename()</code> where "new_name" = "old_name".</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-wrangling-part-one-1.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shorten the variable names for N and C isotope blood samples</span></span>
<span id="cb4-2"><a href="data-wrangling-part-one-1.html#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="data-wrangling-part-one-1.html#cb4-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">rename</span>(penguins,</span>
<span id="cb4-4"><a href="data-wrangling-part-one-1.html#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;delta_15n&quot;</span><span class="ot">=</span><span class="st">&quot;delta_15_n_o_oo&quot;</span>,  <span class="co"># use rename from the dplyr package</span></span>
<span id="cb4-5"><a href="data-wrangling-part-one-1.html#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;delta_13c&quot;</span><span class="ot">=</span><span class="st">&quot;delta_13_c_o_oo&quot;</span>)</span></code></pre></div>
</div>
<div id="glimpse-check-data-format" class="section level3" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> glimpse: check data format</h3>
<p>When we run <code>glimpse()</code> we get several lines of output. The number of observations "rows", the number of variables "columns". Check this against the csv file you have - they should be the same. In the next lines we see variable names and the type of data.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-wrangling-part-one-1.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(penguins)</span></code></pre></div>
<p>We can see a dataset with 345 rows (including the headers) and 17 variables
It also provides information on the <em>type</em> of data in each column</p>
<ul>
<li><p><code>&lt;chr&gt;</code> - means character or text data</p></li>
<li><p><code>&lt;dbl&gt;</code> - means numerical data</p></li>
</ul>
</div>
<div id="rename-text-values" class="section level3" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Rename text values</h3>
<p>Sometimes we may want to rename the values in our variables in order to make a shorthand that is easier to follow. This is changing the <strong>values</strong> in our columns, not the column names.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-wrangling-part-one-1.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use mutate and case_when for an if-else statement that changes the names of the values in a variable</span></span>
<span id="cb6-2"><a href="data-wrangling-part-one-1.html#cb6-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="data-wrangling-part-one-1.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">case_when</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Adelie&quot;</span>,</span>
<span id="cb6-4"><a href="data-wrangling-part-one-1.html#cb6-4" aria-hidden="true" tabindex="-1"></a>                             species <span class="sc">==</span> <span class="st">&quot;Gentoo penguin (Pygoscelis papua)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gentoo&quot;</span>,</span>
<span id="cb6-5"><a href="data-wrangling-part-one-1.html#cb6-5" aria-hidden="true" tabindex="-1"></a>                             species <span class="sc">==</span> <span class="st">&quot;Chinstrap penguin (Pygoscelis antarctica)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Chinstrap&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="dplyr-verbs-1" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> dplyr verbs</h2>
<p>In this section we will be introduced to some of the most commonly used data wrangling functions, these come from the <code>dplyr</code> package (part of the <code>tidyverse</code>). These are functions you are likely to become <em>very</em> familiar with.</p>
<table class="table" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-51">Table 6.1: </span>dplyr verbs
</caption>
<thead>
<tr>
<th style="text-align:left;">
verb
</th>
<th style="text-align:left;">
action
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
select()
</td>
<td style="text-align:left;">
take a subset of columns
</td>
</tr>
<tr>
<td style="text-align:left;">
filter()
</td>
<td style="text-align:left;">
take a subset of rows
</td>
</tr>
<tr>
<td style="text-align:left;">
arrange()
</td>
<td style="text-align:left;">
reorder the rows
</td>
</tr>
<tr>
<td style="text-align:left;">
summarise()
</td>
<td style="text-align:left;">
reduce raw data to user defined summaries
</td>
</tr>
<tr>
<td style="text-align:left;">
group_by()
</td>
<td style="text-align:left;">
group the rows by a specified column
</td>
</tr>
<tr>
<td style="text-align:left;">
mutate()
</td>
<td style="text-align:left;">
create a new variable
</td>
</tr>
</tbody>
</table>
<div id="select-1" class="section level3" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Select</h3>
<p>If we wanted to create a dataset that only includes certain variables, we can use the <code>select()</code> function from the <code>dplyr</code> package.</p>
<p>For example I might wish to create a simplified dataset that only contains <code>species</code>, <code>sex</code>, <code>flipper_length_mm</code> and <code>body_mass_g</code>.</p>
<p>Run the below code to select only those columns</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-wrangling-part-one-1.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DPLYR VERBS ----</span></span>
<span id="cb7-2"><a href="data-wrangling-part-one-1.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="data-wrangling-part-one-1.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> penguins, <span class="co"># the data object</span></span>
<span id="cb7-4"><a href="data-wrangling-part-one-1.html#cb7-4" aria-hidden="true" tabindex="-1"></a>       species, sex, flipper_length_mm, body_mass_g) <span class="co"># the variables you want to select</span></span></code></pre></div>
<p>Alternatively you could tell R the columns you <strong>don't</strong> want e.g.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-wrangling-part-one-1.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> penguins,</span>
<span id="cb8-2"><a href="data-wrangling-part-one-1.html#cb8-2" aria-hidden="true" tabindex="-1"></a>       <span class="sc">-</span>study_name, <span class="sc">-</span>sample_number)</span></code></pre></div>
<p>Note that <code>select()</code> does <strong>not</strong> change the original <code>penguins</code> tibble. It spits out the new tibble directly into your console.</p>
<p>If you don't <strong>save</strong> this new tibble, it won't be stored. If you want to keep it, then you must create a new object.</p>
<p>When you run this new code, you will not see anything in your console, but you will see a new object appear in your Environment pane.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-wrangling-part-one-1.html#cb9-1" aria-hidden="true" tabindex="-1"></a>new_penguins <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> penguins, </span>
<span id="cb9-2"><a href="data-wrangling-part-one-1.html#cb9-2" aria-hidden="true" tabindex="-1"></a>       species, sex, flipper_length_mm, body_mass_g)</span></code></pre></div>
</div>
<div id="filter-1" class="section level3" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Filter</h3>
<p>Having previously used <code>select()</code> to select certain variables, we will now use <code>filter()</code> to select only certain rows or observations. For example only Adelie penguins.</p>
<p>We can do this with the equivalence operator <code>==</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-wrangling-part-one-1.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> new_penguins, species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span>)</span></code></pre></div>
<p>Filter is quite a complicate function, and uses several differe operators to assess the way in which it should apply a filter.</p>
<table class="table" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-56">Table 6.2: </span>Boolean expressions
</caption>
<thead>
<tr>
<th style="text-align:left;">
Operator
</th>
<th style="text-align:left;">
Name
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A &lt; B
</td>
<td style="text-align:left;">
less than
</td>
</tr>
<tr>
<td style="text-align:left;">
A &lt;= B
</td>
<td style="text-align:left;">
less than or equal to
</td>
</tr>
<tr>
<td style="text-align:left;">
A &gt; B
</td>
<td style="text-align:left;">
greater than
</td>
</tr>
<tr>
<td style="text-align:left;">
A &gt;= B
</td>
<td style="text-align:left;">
greater than or equal to
</td>
</tr>
<tr>
<td style="text-align:left;">
A == B
</td>
<td style="text-align:left;">
equivalence
</td>
</tr>
<tr>
<td style="text-align:left;">
A != B
</td>
<td style="text-align:left;">
not equal
</td>
</tr>
<tr>
<td style="text-align:left;">
A %in% B
</td>
<td style="text-align:left;">
in
</td>
</tr>
</tbody>
</table>
<p>If you wanted to select all the Penguin species except Adelies, you use 'not equals'.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-wrangling-part-one-1.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> new_penguins, species <span class="sc">!=</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span>)</span></code></pre></div>
<p>This is the same as</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-wrangling-part-one-1.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> new_penguins, species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Chinstrap penguin (Pygoscelis antarctica)&quot;</span>, <span class="st">&quot;Gentoo penguin (Pygoscelis papua)&quot;</span>))</span></code></pre></div>
<p>You can include multiple expressions within <code>filter()</code> and it will pull out only those rows that evaluate to <code>TRUE</code> for all of your conditions.</p>
<p>For example the below code will pull out only those observations of Adelie penguins where flipper length was measured as greater than 190mm.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-wrangling-part-one-1.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> new_penguins, species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span>, flipper_length_mm <span class="sc">&gt;</span> <span class="dv">190</span>)</span></code></pre></div>
</div>
<div id="arrange-1" class="section level3" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Arrange</h3>
<p>The function <code>arrange()</code> sorts the rows in the table according to the columns supplied. For example</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-wrangling-part-one-1.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> new_penguins, sex)</span></code></pre></div>
<p>The data is now arranged in alphabetical order by sex. So all of the observations of female penguins are listed before males.</p>
<p>You can also reverse this with <code>desc()</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-wrangling-part-one-1.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> new_penguins, <span class="fu">desc</span>(sex))</span></code></pre></div>
<p>You can also sort by more than one column, what do you think the code below does?</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-wrangling-part-one-1.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> new_penguins,</span>
<span id="cb16-2"><a href="data-wrangling-part-one-1.html#cb16-2" aria-hidden="true" tabindex="-1"></a>        sex,</span>
<span id="cb16-3"><a href="data-wrangling-part-one-1.html#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">desc</span>(species),</span>
<span id="cb16-4"><a href="data-wrangling-part-one-1.html#cb16-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">desc</span>(flipper_length_mm))</span></code></pre></div>
</div>
<div id="mutate-1" class="section level3" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> Mutate</h3>
<p>Sometimes we need to create a new variable that doesn't exist in our dataset. For example we might want to figure out what the flipper length is when factoring in body mass.</p>
<p>To create new variables we use the function <code>mutate()</code>.</p>
<p>Note that as before, if you want to save your new column you must save it as an object. Here we are mutating a new column and attaching it to the <code>new_penguins</code> data oject.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-wrangling-part-one-1.html#cb17-1" aria-hidden="true" tabindex="-1"></a>new_penguins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="at">.data =</span> new_penguins,</span>
<span id="cb17-2"><a href="data-wrangling-part-one-1.html#cb17-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="dv">1000</span>)</span></code></pre></div>
</div>
</div>
<div id="pipes-1" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Pipes</h2>
<blockquote class="twitter-tweet" data-width="550" data-lang="en" data-dnt="true" data-theme="light">
<p lang="en" dir="ltr">
I %&gt;% <br> tumble(out_of = "bed") %&gt;% <br> stumble(to = "the kitchen") %&gt;% <br> pour(who = "myself", unit = "cup", what = "ambition") %&gt;% <br> yawn() %&gt;% <br> stretch() %&gt;% <br> try(come_to_live()) <a href="https://t.co/plnA2dZdJ4">https://t.co/plnA2dZdJ4</a>
</p>
‚Äî Hadley Wickham (<span class="citation">(<a href="#ref-hadleywickham" role="doc-biblioref"><strong>hadleywickham?</strong></a>)</span>) <a href="https://twitter.com/hadleywickham/status/1359852563726819332?ref_src=twsrc%5Etfw">February 11, 2021</a>
</blockquote>
<p>Pipes look like this: <code>%&gt;%</code> Pipes allow you to send the output from one function straight into another function. Specifically, they send the result of the function before <code>%&gt;%</code> to be the <strong>first</strong> argument of the function after <code>%&gt;%</code>. As usual, it's easier to show, rather than tell so let's look at an example.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-wrangling-part-one-1.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> <span class="fu">filter</span>(<span class="at">.data =</span> <span class="fu">select</span>(<span class="at">.data =</span> penguins, species, sex, flipper_length_mm), sex <span class="sc">==</span> <span class="st">&quot;MALE&quot;</span>), <span class="fu">desc</span>(flipper_length_mm))</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-wrangling-part-one-1.html#cb19-1" aria-hidden="true" tabindex="-1"></a>object_1 <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> penguins, species, sex, flipper_length_mm)</span>
<span id="cb19-2"><a href="data-wrangling-part-one-1.html#cb19-2" aria-hidden="true" tabindex="-1"></a>object_2 <span class="ot">&lt;-</span> <span class="fu">filter</span>(<span class="at">.data =</span> object_1, sex <span class="sc">==</span> <span class="st">&quot;MALE&quot;</span>)</span>
<span id="cb19-3"><a href="data-wrangling-part-one-1.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(object_2, <span class="fu">desc</span>(flipper_length_mm))</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-wrangling-part-one-1.html#cb20-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="data-wrangling-part-one-1.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, sex, flipper_length_mm) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="data-wrangling-part-one-1.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;MALE&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="data-wrangling-part-one-1.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(flipper_length_mm))</span></code></pre></div>
<p>The reason that this function is called a pipe is because it 'pipes' the data through to the next function. When you wrote the code previously, the first argument of each function was the dataset you wanted to work on. When you use pipes it will automatically take the data from the previous line of code so you don't need to specify it again.</p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Try and write out as plain English what the %&gt;% above is doing? You can read the %&gt;% as THEN
</div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<p>Take the penguins data AND THEN
Select only the species, sex and flipper lenght columns AND THEN
Filter to keep only those observations labelled as sex equals male AND THEN
Arrange the data from HIGHEST to LOWEST flipper lengths.</p>
</div>
</div>
<div id="a-few-more-handy-functions" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> A few more handy functions</h2>
<div id="check-for-duplication-1" class="section level3" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> Check for duplication</h3>
<p>It is very easy when inputting data to make mistakes, copy something in twice for example, or if someone did a lot of copy-pasting to assemble a spreadsheet (yikes!). We can check this pretty quickly</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-wrangling-part-one-1.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check for duplicate rows in the data</span></span>
<span id="cb21-2"><a href="data-wrangling-part-one-1.html#cb21-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="data-wrangling-part-one-1.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">duplicated</span>() <span class="sc">%&gt;%</span> <span class="co"># produces a list of TRUE/FALSE statements for duplicated or not</span></span>
<span id="cb21-4"><a href="data-wrangling-part-one-1.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="co"># sums all the TRUE statements</span></span></code></pre></div>
<pre><code>[1] 0</code></pre>
<p>Great!</p>
</div>
<div id="summarise-1" class="section level3" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> Summarise</h3>
<p>We can also explore our data for very obvious typos by checking for implausibly small or large values, this is a simple use of the <code>summarise</code> function.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-wrangling-part-one-1.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use summarise to make calculations</span></span>
<span id="cb23-2"><a href="data-wrangling-part-one-1.html#cb23-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="data-wrangling-part-one-1.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min=</span><span class="fu">min</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb23-4"><a href="data-wrangling-part-one-1.html#cb23-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">max=</span><span class="fu">max</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<p>The minimum weight for our penguins is 2.7kg, and the max is 6.3kg - not outrageous. If the min had come out at 27g we might have been suspicious. We will use <code>summarise</code> again to calculate other metrics in the future.</p>
<div class="information">
<p>
our first data insight, the difference the smallest adult penguin in our dataset is nearly half the size of the largest penguin.
</p>
</div>
</div>
<div id="group-by-1" class="section level3" number="6.5.3">
<h3><span class="header-section-number">6.5.3</span> Group By</h3>
<p>Many data analysis tasks can be approached using the ‚Äúsplit-apply-combine‚Äù paradigm: split the data into groups, apply some analysis to each group, and then combine the results. <code>dplyr</code> makes this very easy with the <code>group_by()</code> function. In the <code>summarise</code> example above we were able to find the max-min body mass values for the penguins in our dataset. But what if we wanted to break that down by a grouping such as species of penguin. This is where <code>group_by()</code> comes in.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-wrangling-part-one-1.html#cb24-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="data-wrangling-part-one-1.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span>  <span class="co"># subsequent functions are perform &quot;by group&quot;</span></span>
<span id="cb24-3"><a href="data-wrangling-part-one-1.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min=</span><span class="fu">min</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb24-4"><a href="data-wrangling-part-one-1.html#cb24-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">max=</span><span class="fu">max</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<p>Now we know a little more about our data, the max weight of our Gentoo penguins is much larger than the other two species. In fact, the minimum weight of a Gentoo penguin is not far off the max weight of the other two species.</p>
</div>
<div id="distinct-1" class="section level3" number="6.5.4">
<h3><span class="header-section-number">6.5.4</span> Distinct</h3>
<p>We can also look for typos by asking R to produce all of the distinct values in a variable. This is more useful for categorical data, where we expect there to be only a few distinct categories</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-wrangling-part-one-1.html#cb25-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="data-wrangling-part-one-1.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(sex)</span></code></pre></div>
<p>Here if someone had mistyped e.g. 'FMALE' it would be obvious. We could do the same thing (and probably should have before we changed the names) for species.</p>
</div>
<div id="missing-values-na-1" class="section level3" number="6.5.5">
<h3><span class="header-section-number">6.5.5</span> Missing values: NA</h3>
<p>There are multiple ways to check for missing values in our data</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-wrangling-part-one-1.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get a sum of how many observations are missing in our dataframe</span></span>
<span id="cb26-2"><a href="data-wrangling-part-one-1.html#cb26-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="data-wrangling-part-one-1.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">is.na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="data-wrangling-part-one-1.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span></code></pre></div>
<p>But this doesn't tell us where these are, fortunately the function <code>summary</code> does this easily</p>
</div>
</div>
<div id="summary" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> <code>Summary</code></h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-wrangling-part-one-1.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># produce a summary of our data</span></span>
<span id="cb27-2"><a href="data-wrangling-part-one-1.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(penguins)</span>
<span id="cb27-3"><a href="data-wrangling-part-one-1.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#__________________________----</span></span></code></pre></div>
<p>This provides a quick breakdown of the max and min for all numeric variables, as well as a list of how many missing observations there are for each one. As we can see there appear to be two missing observations for measurements in body mass, bill lengths, flipper lengths and several more for blood measures. We don't know for sure without inspecting our data further, <em>but</em> it is likely that the two birds are missing multiple measurements, and that several more were measured but didn't have their blood drawn.</p>
<p>We will leave the NA's alone for now, but it's useful to know how many we have.</p>
<p>We've now got a clean &amp; tidy dataset, with a handful of first insights into the data.</p>
</div>
<div id="finished-1" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> Finished</h2>
<p>That was a lot of work! But remember you don't have to remember all of these functions, remember this chapter when you do more data wrangling in the future. Also bookmark the <a href="https://www.rstudio.com/resources/cheatsheets/">RStudio Cheatsheets Page</a>.</p>
<p>Finally, make sure you have saved the changes made to your script üíæ &amp; make sure your workspace is set <strong>not</strong> to save objects from the environment <em>between</em> sessions <span class="citation">(<a href="#ref-global-options" role="doc-biblioref"><strong>global-options?</strong></a>)</span>.</p>
<p>We want our script to be our record of work and progress, and not to be confused by a cluttered R Environment.</p>
</div>
<div id="activity-reorganise-this-script-1" class="section level2" number="6.8">
<h2><span class="header-section-number">6.8</span> Activity: Reorganise this script</h2>
<p>Using the link below take the text and copy/paste into a <strong>new</strong> R script and save this as <code>YYYY_MM_DD_workshop_4_jumbled_script.R</code></p>
<p>All of the correct lines of code, comments and document markers are present, but not in the correct order. Can you unscramble them to produce a sensible output and a clear document outline?</p>
<div id="submit-when-you-are-finished-1" class="section level3" number="6.8.1">
<h3><span class="header-section-number">6.8.1</span> Submit when you are finished</h3>
<a href="https://raw.githubusercontent.com/UEABIO/data-sci-v1/main/book/files/jumbled_script.R">
<button class="btn btn-success"><i class="fa fa-save"></i> Download jumbled R script</button>
</a>
<div class="webex-solution">
<button>
Solution
</button>
<p>If you want to check your answers (or are just completely stuck) then click here before submitting</p>
<a href="https://raw.githubusercontent.com/UEABIO/data-sci-v1/main/book/files/unjumbled_script.R">
<button class="btn btn-success"><i class="fa fa-save"></i> Unjumbled script</button>
</a>
</div>
</div>
</div>
<div id="load-your-workspace-2" class="section level2" number="6.9">
<h2><span class="header-section-number">6.9</span> Load your workspace</h2>
<p>You should have a workspace ready to work with the Palmer penguins data. Load this workspace now.</p>
<p>Think about some basic checks before you start your work today.</p>
<div id="checklist-2" class="section level3" number="6.9.1">
<h3><span class="header-section-number">6.9.1</span> Checklist</h3>
<ul>
<li><p>Are there objects already in your Enviroment pane? <a href="basic-programming.html#global-options">There shouldn't be</a>, if there are use <code>rm(list=ls())</code></p></li>
<li><p>Re-run your script from <a href="data-wrangling-part-one.html#data-wrangling-part-one">last time</a> from line 1 to the last line</p></li>
<li><p>Check for any warning or error messages</p></li>
<li><p>Add the code from today's session as we go</p></li>
</ul>
</div>
</div>
<div id="more-summary-tools" class="section level2" number="6.10">
<h2><span class="header-section-number">6.10</span> More summary tools</h2>
<p>Very often we want to make calculations aobut groups of observations, such as the mean or median. We are often interested in comparing responses among groups. For example, we previously found the number of distinct penguins in our entire dataset</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-wrangling-part-one-1.html#cb28-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="data-wrangling-part-one-1.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n_distinct</span>(individual_id))</span></code></pre></div>
<p>Now consider when the groups are subsets of observations, as when we find out the number of penguins in each species and sex.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-wrangling-part-one-1.html#cb29-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="data-wrangling-part-one-1.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="data-wrangling-part-one-1.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n_distinct</span>(individual_id))</span></code></pre></div>
<p>As we progress, not only are we learning how to use our data wrangling tools. We are also gaining insights into our data.</p>
<p><strong>Question</strong> How many female Adelie penguins are in our dataset?</p>
<p><input class='webex-solveme nospaces' size='2' data-answer='["65"]'/></p>
<p><br></p>
<p><strong>Question</strong> How many Gentoo penguins <strong>did not</strong> have their sex recorded?</p>
<p><input class='webex-solveme nospaces' size='1' data-answer='["5"]'/></p>
<p><br></p>
<p>We are using summarise and group_by a lot! They are very powerful functions:</p>
<ul>
<li><p><code>group_by</code> adds <em>grouping</em> information into a data object, so that subsequent calculations happen on a <em>group-specific</em> basis.</p></li>
<li><p><code>summarise</code> is a data aggregation function thart calculates summaries of one or more variables, and it will do this separately for any groups defined by <code>group_by</code></p></li>
</ul>
<div id="using-summarise" class="section level3" number="6.10.1">
<h3><span class="header-section-number">6.10.1</span> Using summarise()</h3>
<p><code>summarise()</code> has a whole list of useful functions for producing <em>descriptive</em> statistics</p>
<table class="table" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-4">Table 6.3: </span>Useful summarise functions
</caption>
<thead>
<tr>
<th style="text-align:left;">
verb
</th>
<th style="text-align:left;">
action
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
mean(), median()
</td>
<td style="text-align:left;">
Center data
</td>
</tr>
<tr>
<td style="text-align:left;">
sd(), IQR()
</td>
<td style="text-align:left;">
Spread of data
</td>
</tr>
<tr>
<td style="text-align:left;">
min(), max(), quantile()
</td>
<td style="text-align:left;">
Range of data
</td>
</tr>
<tr>
<td style="text-align:left;">
first(), last(), nth()
</td>
<td style="text-align:left;">
Position
</td>
</tr>
<tr>
<td style="text-align:left;">
n(), n_distinct()
</td>
<td style="text-align:left;">
Count
</td>
</tr>
</tbody>
</table>
<ul>
<li><p><code>min</code> and <code>max</code> to calculate minimum and maximum values of a numeric vector</p></li>
<li><p><code>mean</code> and <code>median</code> to calculate averages of a numeric vector</p></li>
<li><p><code>sd</code> and <code>var</code> calculate standard deviation and variance of a numeric vector</p></li>
</ul>
<p>Using <code>summarise</code> we can calculate the mean flipper and bill lengths of our penguins:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-wrangling-part-one-1.html#cb30-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="data-wrangling-part-one-1.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb30-3"><a href="data-wrangling-part-one-1.html#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb30-4"><a href="data-wrangling-part-one-1.html#cb30-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">mean_bill_length =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<div class="info">
<p>
Note - we provide informative names for ourselves on the left side of the <code>=</code>
</p>
<p>
When performing calculations in summarise it is important to set <code>na.rm = TRUE</code>, this removes missing values from the calculation
</p>
</div>
<div class="try">
<p>
What happens when you try to produce calculations that include <code>NA</code>? e.g <code>NA</code> + 4 or <code>NA</code> * 5
</p>
</div>
<p>We can use several functions in <code>summarise</code>. Which means we can string several calculations together in a single step, and generate more insights into our data.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-wrangling-part-one-1.html#cb31-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="data-wrangling-part-one-1.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(), <span class="co"># number of rows of data</span></span>
<span id="cb31-3"><a href="data-wrangling-part-one-1.html#cb31-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">num_penguins =</span> <span class="fu">n_distinct</span>(individual_id), <span class="co"># number of unique individuals</span></span>
<span id="cb31-4"><a href="data-wrangling-part-one-1.html#cb31-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="co"># mean flipper length</span></span>
<span id="cb31-5"><a href="data-wrangling-part-one-1.html#cb31-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">prop_female =</span> <span class="fu">sum</span>(sex <span class="sc">==</span> <span class="st">&quot;FEMALE&quot;</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="co"># proportion of observations that are coded as female</span></span></code></pre></div>
<div class="webex-solution">
<button>
Solution
</button>
<ul>
<li>There are 190 unique IDs and 344 total observations so it would appear that there are roughly twice as many observations as unique individuals. The sex ratio is roughly even (48% female) and the average flipper length is 201 mm.</li>
</ul>
</div>
</div>
<div id="summarize-across-columns" class="section level3" number="6.10.2">
<h3><span class="header-section-number">6.10.2</span> Summarize <code>across</code> columns</h3>
<p><code>across</code> has two arguments, <code>.cols</code> and <code>.fns</code>.</p>
<ul>
<li><p>The <code>.cols</code> argument lets you select the columns you wish to apply functions to</p></li>
<li><p>The <code>.fns</code> argument applies the required function to all of the selected columns.</p></li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-wrangling-part-one-1.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Across ----</span></span>
<span id="cb32-2"><a href="data-wrangling-part-one-1.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The mean of ALL numeric columns in the data, where(is.numeric == TRUE) hunts for numeric columns</span></span>
<span id="cb32-3"><a href="data-wrangling-part-one-1.html#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="data-wrangling-part-one-1.html#cb32-4" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb32-5"><a href="data-wrangling-part-one-1.html#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), </span>
<span id="cb32-6"><a href="data-wrangling-part-one-1.html#cb32-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">mean</span>(., <span class="at">na.rm=</span><span class="cn">TRUE</span>)))</span></code></pre></div>
<p>The above example calculates the means of any &amp; all numeric variables in the dataset.</p>
<p>The below example is a slightly complicated way of running the n_distinct for summarise. The <code>.cols()</code> looks for any column that contains the word "penguin" and then runs the <code>n_distinct()</code>command on these</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-wrangling-part-one-1.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of distinct penguins, as only one column contains the word penguin</span></span>
<span id="cb33-2"><a href="data-wrangling-part-one-1.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the argument contains looks for columns that match a character expression</span></span>
<span id="cb33-3"><a href="data-wrangling-part-one-1.html#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="data-wrangling-part-one-1.html#cb33-4" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="data-wrangling-part-one-1.html#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">contains</span>(<span class="st">&quot;individual&quot;</span>), </span>
<span id="cb33-6"><a href="data-wrangling-part-one-1.html#cb33-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">n_distinct</span>(.)))</span></code></pre></div>
</div>
<div id="group_by-revisited" class="section level3" number="6.10.3">
<h3><span class="header-section-number">6.10.3</span> group_by revisited</h3>
<p>The <code>group_by</code> function provides the ability to separate our summary functions according to any subgroups we wish to make. The real magic happens when we pair this with <code>summarise</code> and <code>mutate</code>.</p>
<p>In this example, by grouping on the individual penguin ids, then summarising by n - we can see how many times each penguin was monitored in the course of this study.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-wrangling-part-one-1.html#cb34-1" aria-hidden="true" tabindex="-1"></a>penguin_stats <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="data-wrangling-part-one-1.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(penguin_id) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="data-wrangling-part-one-1.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num=</span><span class="fu">n</span>())</span></code></pre></div>
<div class="info">
<p>
Remember the actions of <code>group_by</code> are "invisible". Subsequent functions are applied in a "grouped by" manner - but the dataframe itself looks unchanged.
</p>
</div>
</div>
<div id="more-than-one-grouping-variable" class="section level3" number="6.10.4">
<h3><span class="header-section-number">6.10.4</span> More than one grouping variable</h3>
<p>What if we need to calculate by more than one variable at a time?
No problem we can submit several arguments:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-wrangling-part-one-1.html#cb35-1" aria-hidden="true" tabindex="-1"></a>penguins_grouped <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="data-wrangling-part-one-1.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, species)</span></code></pre></div>
<p>We can then calculate the mean flipper length of penguins in each of the six combinations</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-wrangling-part-one-1.html#cb36-1" aria-hidden="true" tabindex="-1"></a>penguins_grouped <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="data-wrangling-part-one-1.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="at">mean_flipper =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<p>Now the first row of our summary table shows us the mean flipper length (in mm) for female Adelie penguins. There are eight rows in total, six unique combinations and two rows where the sex of the penguins was not recorded(<code>NA</code>)</p>
</div>
<div id="using-group_by-with-mutate" class="section level3" number="6.10.5">
<h3><span class="header-section-number">6.10.5</span> using group_by with mutate</h3>
<p>So far we have only used <code>group_by</code> with the <code>summarise</code> function, but this doesn't always have to be the case.
When <code>mutate</code> is used with <code>group_by</code>, the calculations occur by 'group'. Here's an example:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-wrangling-part-one-1.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using mutate and group_by ----</span></span>
<span id="cb37-2"><a href="data-wrangling-part-one-1.html#cb37-2" aria-hidden="true" tabindex="-1"></a>centered_penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="data-wrangling-part-one-1.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, species) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="data-wrangling-part-one-1.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_centered =</span> flipper_length_mm<span class="sc">-</span><span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb37-5"><a href="data-wrangling-part-one-1.html#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="data-wrangling-part-one-1.html#cb37-6" aria-hidden="true" tabindex="-1"></a>centered_penguins <span class="sc">%&gt;%</span> </span>
<span id="cb37-7"><a href="data-wrangling-part-one-1.html#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(flipper_centered)</span>
<span id="cb37-8"><a href="data-wrangling-part-one-1.html#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Each row now returns a value for EACH penguin of how much greater/lesser than the group average (sex and species) its flipper is. </span></span></code></pre></div>
<p>Here we are calculating a <strong>group centered mean</strong>, this new variable contains the <em>difference</em> between each observation and the mean of whichever group that observation is in.</p>
</div>
<div id="remove-group_by" class="section level3" number="6.10.6">
<h3><span class="header-section-number">6.10.6</span> remove group_by</h3>
<p>On occasion we may need to remove the grouping information from a dataset. This is often required when we string pipes together, when we need to work using a grouping structure, then revert back to the whole dataset again</p>
<p>Look at our grouped dataframe, and we can see the information on groups is at the top of the data:</p>
<pre><code># A tibble: 344 x 10
# Groups:   sex, species [8]
   species island bill_length_mm bill_depth_mm flipper_length_~ body_mass_g
   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;
 1 Adelie  Torge~           39.1          18.7              181        3750
 2 Adelie  Torge~           39.5          17.4              186        3800
 3 Adelie  Torge~           40.3          18                195        3250</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-wrangling-part-one-1.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run this command will remove the groups - but this is only saved if assigned BACK to an object</span></span>
<span id="cb39-2"><a href="data-wrangling-part-one-1.html#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="data-wrangling-part-one-1.html#cb39-3" aria-hidden="true" tabindex="-1"></a>centered_penguins <span class="ot">&lt;-</span> centered_penguins <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="data-wrangling-part-one-1.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb39-5"><a href="data-wrangling-part-one-1.html#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="data-wrangling-part-one-1.html#cb39-6" aria-hidden="true" tabindex="-1"></a>centered_penguins</span></code></pre></div>
<p>Look at this output - you can see the information on groups has now been removed from the data.</p>
</div>
</div>
<div id="working-with-character-strings" class="section level2" number="6.11">
<h2><span class="header-section-number">6.11</span> Working with character strings</h2>
<p>Datasets often contain words, and we call these words "(character) strings".</p>
<p>Often these aren't quite how we want them to be, but we can manipulate these as much as we like. Functions in the package <code>stringr</code>, are fantastic. And the number of different types of manipulations are endless!</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-wrangling-part-one-1.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stringr ----</span></span>
<span id="cb40-2"><a href="data-wrangling-part-one-1.html#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="data-wrangling-part-one-1.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(<span class="fu">names</span>(penguins), <span class="fu">c</span>(<span class="st">&quot;e&quot;</span><span class="ot">=</span> <span class="st">&quot;E&quot;</span>))</span>
<span id="cb40-4"><a href="data-wrangling-part-one-1.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># replace all character &quot;e&quot; with &quot;E&quot;</span></span></code></pre></div>
<div id="more-stringr" class="section level3" number="6.11.1">
<h3><span class="header-section-number">6.11.1</span> More stringr</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-wrangling-part-one-1.html#cb41-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="data-wrangling-part-one-1.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species=</span><span class="fu">str_to_upper</span>(species))</span>
<span id="cb41-3"><a href="data-wrangling-part-one-1.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Capitalise all letters</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data-wrangling-part-one-1.html#cb42-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="data-wrangling-part-one-1.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species=</span><span class="fu">str_remove_all</span>(species, <span class="st">&quot;e&quot;</span>))</span>
<span id="cb42-3"><a href="data-wrangling-part-one-1.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># remove every character &quot;e&quot; from selected variables</span></span></code></pre></div>
<p>We can also trim leading or trailing empty spaces with <code>str_trim</code>. These are often problematic and difficult to spot e.g.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-wrangling-part-one-1.html#cb43-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">label=</span><span class="fu">c</span>(<span class="st">&quot;penguin&quot;</span>, <span class="st">&quot; penguin&quot;</span>, <span class="st">&quot;penguin &quot;</span>)) </span>
<span id="cb43-2"><a href="data-wrangling-part-one-1.html#cb43-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="co"># make a test dataframe</span></span></code></pre></div>
<p>We can easily imagine a scenario where data is manually input, and trailing or leading spaces are left in. These are difficult to spot by eye - but problematic because as far as R is concerned these are different values. We can use the function <code>distinct</code> to return the names of all the different levels it can find in this dataframe.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-wrangling-part-one-1.html#cb44-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="data-wrangling-part-one-1.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
<p>If we pipe the data throught the <code>str_trim</code> function to remove any gaps, then pipe this on to <code>distinct</code> again - by removing the whitespace, R now recognises just one level to this data.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-wrangling-part-one-1.html#cb45-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="data-wrangling-part-one-1.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label=</span><span class="fu">str_trim</span>(label, <span class="at">side=</span><span class="st">&quot;both&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="data-wrangling-part-one-1.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
<p>A quick example of how to extract partial strings according to a pattern is to use <code>str_detect</code>. Combined with <code>filter</code> it is possible to subset a dataframe by searching for all the strings that match provided information, such as all the penguin IDs that start with "N1"</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-wrangling-part-one-1.html#cb46-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="data-wrangling-part-one-1.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(individual_id, <span class="st">&quot;N1&quot;</span>))</span></code></pre></div>
</div>
<div id="separate" class="section level3" number="6.11.2">
<h3><span class="header-section-number">6.11.2</span> separate</h3>
<p>Sometimes a string might contain two pieces of information in one. This does not confirm to our tidy data principles. But we can easily separate the information with <code>separate()</code> from the <code>tidyr</code> package.</p>
<p>First we produce some made-up data</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-wrangling-part-one-1.html#cb47-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">label=</span><span class="fu">c</span>(<span class="st">&quot;a-1&quot;</span>, <span class="st">&quot;a-2&quot;</span>, <span class="st">&quot;a-3&quot;</span>)) </span>
<span id="cb47-2"><a href="data-wrangling-part-one-1.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#make a one column tibble</span></span>
<span id="cb47-3"><a href="data-wrangling-part-one-1.html#cb47-3" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
label
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
a-1
</td>
</tr>
<tr>
<td style="text-align:left;">
a-2
</td>
</tr>
<tr>
<td style="text-align:left;">
a-3
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-wrangling-part-one-1.html#cb48-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="data-wrangling-part-one-1.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(label, <span class="co"># name of variable</span></span>
<span id="cb48-3"><a href="data-wrangling-part-one-1.html#cb48-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">c</span>(<span class="st">&quot;treatment&quot;</span>, <span class="st">&quot;replicate&quot;</span>), <span class="co"># new column names</span></span>
<span id="cb48-4"><a href="data-wrangling-part-one-1.html#cb48-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep=</span><span class="st">&quot;-&quot;</span>) <span class="co"># the character to mark where the separation occurs</span></span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
treatment
</th>
<th style="text-align:left;">
replicate
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
3
</td>
</tr>
</tbody>
</table>
</div>
<p>We started with one variable called <code>label</code> and then split it into two variables, <code>treatment</code> and <code>replicate</code>, with the split made where <code>-</code> occurs.
The opposite of this function is <code>unite()</code></p>
</div>
</div>
<div id="changing-data-formats" class="section level2" number="6.12">
<h2><span class="header-section-number">6.12</span> Changing data formats</h2>
<p>In the previous <a href="@glimpse-check-data-format">worksheet</a>, we used <code>glimpse()</code> to check the format of each of our variables. One of our variables <code>date_egg</code> isn't in a very helpful format. It has been read as a character string, this means there is no intrinsic order or values attached to the dates. Most likely this has happened because of the "/" symbols. When we have clearly non-numerical symbols in our variables, R will default to treating these as character variables.</p>
<p>Luckily we can fix this using <code>mutate()</code> and <code>str_remove_all()</code></p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Remove the all the "/" elements from the <code>date_egg</code> variable
</div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<p>Check your code</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-wrangling-part-one-1.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DATES ----</span></span>
<span id="cb49-2"><a href="data-wrangling-part-one-1.html#cb49-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="data-wrangling-part-one-1.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_egg =</span> <span class="fu">str_remove_all</span>(date_egg, <span class="st">&quot;/&quot;</span>))</span></code></pre></div>
</div>
<p><strong>Question</strong> Does this now mean the <code>date_egg</code> variable is being treated as numeric? <code>r</code></p>
<p><select class='webex-select'><option value='blank'></option><option value=''>yes</option><option value='answer'>no</option></select></p>
<div class="webex-solution">
<button>
Explain This Answer
</button>
<p>Data formats are set only when reading the data in for the first time, if we wish to change them, then we need to do so explicitly using mutate()</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data-wrangling-part-one-1.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add the as.numeric() function</span></span>
<span id="cb50-2"><a href="data-wrangling-part-one-1.html#cb50-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="data-wrangling-part-one-1.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_egg =</span> <span class="fu">as.numeric</span>(<span class="fu">str_remove_all</span>(date_egg, <span class="st">&quot;/&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="data-wrangling-part-one-1.html#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<div class="info">
<p>
There are as.numeric(), as.character(), as.logical() functions to convert data formats, these will only work if there are no "illegal" characters. So you may need to remove these first, as in the examples above.
</p>
</div>
</div>
<p><br></p>
</div>
<div id="working-with-dates-1" class="section level2" number="6.13">
<h2><span class="header-section-number">6.13</span> Working with dates</h2>
<p>We now know that we can change data formats easily, but treating date as strictly numeric is problematic, it won't account for number of days in months or number of months in a year.</p>
<p>Additionally there's a lot of different ways to write the same date:</p>
<ul>
<li><p>13-10-2019</p></li>
<li><p>10-13-2019</p></li>
<li><p>13-10-19</p></li>
<li><p>13th Oct 2019</p></li>
<li><p>2019-10-13</p></li>
</ul>
<p>This variability makes it difficult to tell our software how to read the information, luckily we can use the functions in the <code>lubridate</code> package.</p>
<p>Depending on how we interpret the date ordering in a file, we can use <code>ymd()</code>, <code>ydm()</code>, <code>mdy()</code>, <code>dmy()</code></p>
<ul>
<li><strong>Question</strong> What is the appropriate function to use on the <code>date_egg</code> variable?</li>
</ul>
<p><input class='webex-solveme nospaces' size='5' data-answer='["dmy()"]'/></p>
<div class="warning">
<p>
If you get a warning that some dates could not be parsed, then you might find the date has been inconsistently entered into the dataset.
</p>
<p>
Pay attention to warning and error messages
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-wrangling-part-one-1.html#cb51-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="data-wrangling-part-one-1.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_egg_proper =</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(date_egg))</span></code></pre></div>
<p>Here we use the <code>mutate</code> function from <code>dplyr</code> to create a <em>new variable</em> called <code>date_egg_proper</code> based on the output of converting the characters in <code>date_egg</code> to date format. The original variable is left intact, if we had specified the "new" variable was also called <code>date_egg</code> then it would have overwritten the original variable.</p>
</div>
<p>Once we have established our date data, we are able to perform calculations. Such as the date range across which our data was collected.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data-wrangling-part-one-1.html#cb52-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="data-wrangling-part-one-1.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min_date=</span><span class="fu">min</span>(date_egg_proper),</span>
<span id="cb52-3"><a href="data-wrangling-part-one-1.html#cb52-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_date=</span><span class="fu">max</span>(date_egg_proper))</span></code></pre></div>
<div id="calculations-with-dates" class="section level3" number="6.13.1">
<h3><span class="header-section-number">6.13.1</span> Calculations with dates</h3>
<p>How many times was each penguin measured, and across what total time period?</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-wrangling-part-one-1.html#cb53-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="data-wrangling-part-one-1.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(individual_id) <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="data-wrangling-part-one-1.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">first_observation=</span><span class="fu">min</span>(date_egg_proper), </span>
<span id="cb53-4"><a href="data-wrangling-part-one-1.html#cb53-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">last_observation=</span><span class="fu">max</span>(date_egg_proper), </span>
<span id="cb53-5"><a href="data-wrangling-part-one-1.html#cb53-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">study_duration =</span> last_observation<span class="sc">-</span>first_observation, </span>
<span id="cb53-6"><a href="data-wrangling-part-one-1.html#cb53-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span><span class="fu">n</span>())</span></code></pre></div>
<p>Cool we can also convert intervals such as days into weeks, months or years with <code>dweeks(1)</code>, <code>dmonths(1)</code>, <code>dyears(1)</code>.</p>
<p>As with all cool functions, you should check out the RStudio <a href="https://www.rstudio.com/resources/cheatsheets/">cheat sheet</a> for more information. Date type data is common in datasets, and learning to work with it is a useful skill.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-wrangling-part-one-1.html#cb54-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="data-wrangling-part-one-1.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(individual_id) <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="data-wrangling-part-one-1.html#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">first_observation=</span><span class="fu">min</span>(date_egg_proper), </span>
<span id="cb54-4"><a href="data-wrangling-part-one-1.html#cb54-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">last_observation=</span><span class="fu">max</span>(date_egg_proper), </span>
<span id="cb54-5"><a href="data-wrangling-part-one-1.html#cb54-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">study_duration_years =</span> (last_observation<span class="sc">-</span>first_observation)<span class="sc">/</span>lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">1</span>), </span>
<span id="cb54-6"><a href="data-wrangling-part-one-1.html#cb54-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb54-7"><a href="data-wrangling-part-one-1.html#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(study_duration_years))</span></code></pre></div>
</div>
</div>
<div id="factors" class="section level2" number="6.14">
<h2><span class="header-section-number">6.14</span> Factors</h2>
<p>In R, factors are a class of data that allow for ordered categories with a fixed set of acceptable values.</p>
<p>Typically, you would convert a column from character or numeric class to a factor if you want to set an intrinsic order to the values (‚Äúlevels‚Äù) so they can be displayed non-alphabetically in plots and tables.</p>
<p>Another common use of factors is to standardise the legends of plots so they do not fluctuate if certain values are temporarily absent from the data.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-wrangling-part-one-1.html#cb55-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="data-wrangling-part-one-1.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_range =</span> <span class="fu">case_when</span>(flipper_length_mm <span class="sc">&lt;=</span> <span class="dv">190</span> <span class="sc">~</span> <span class="st">&quot;small&quot;</span>,</span>
<span id="cb55-3"><a href="data-wrangling-part-one-1.html#cb55-3" aria-hidden="true" tabindex="-1"></a>                                   flipper_length_mm <span class="sc">&gt;</span><span class="dv">190</span> <span class="sc">&amp;</span> flipper_length_mm <span class="sc">&lt;</span> <span class="dv">213</span> <span class="sc">~</span> <span class="st">&quot;medium&quot;</span>,</span>
<span id="cb55-4"><a href="data-wrangling-part-one-1.html#cb55-4" aria-hidden="true" tabindex="-1"></a>                                   flipper_length_mm <span class="sc">&gt;=</span> <span class="dv">213</span> <span class="sc">~</span> <span class="st">&quot;large&quot;</span>))</span></code></pre></div>
<p>If we make a barplot, the order of the values on the x axis will typically be in alphabetical order for any character data</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-wrangling-part-one-1.html#cb56-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="data-wrangling-part-one-1.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_range))<span class="sc">+</span></span>
<span id="cb56-3"><a href="data-wrangling-part-one-1.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="05-data-wrangling-part-2_files/figure-html/unnamed-chunk-37-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>To convert a character or numeric column to class factor, you can use any function from the <code>forcats</code> package (many are detailed below). They will convert to class factor and then also perform or allow certain ordering of the levels - for example using <code>fct_relevel()</code> lets you manually specify the level order. The function <code>as_factor()</code> simply converts the class without any further capabilities.</p>
<p>The <code>base R</code> function <code>factor()</code> converts a column to factor and allows you to manually specify the order of the levels, as a character vector to its levels = argument.</p>
<p>Below we use <code>mutate()</code> and <code>fct_relevel()</code> to convert the column flipper_range from class character to class factor.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-wrangling-part-one-1.html#cb57-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="data-wrangling-part-one-1.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_range =</span> <span class="fu">fct_relevel</span>(flipper_range))</span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-wrangling-part-one-1.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(penguins<span class="sc">$</span>flipper_range)</span></code></pre></div>
<pre><code>## [1] &quot;large&quot;  &quot;medium&quot; &quot;small&quot;</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data-wrangling-part-one-1.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct the code in your script with this version</span></span>
<span id="cb60-2"><a href="data-wrangling-part-one-1.html#cb60-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="data-wrangling-part-one-1.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_range =</span> <span class="fu">fct_relevel</span>(flipper_range, <span class="st">&quot;small&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;large&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data-wrangling-part-one-1.html#cb61-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="data-wrangling-part-one-1.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_range))<span class="sc">+</span></span>
<span id="cb61-3"><a href="data-wrangling-part-one-1.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="05-data-wrangling-part-2_files/figure-html/unnamed-chunk-41-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="insights" class="section level2" number="6.15">
<h2><span class="header-section-number">6.15</span> Insights</h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>(<a href="http://vita.had.co.nz/papers/tidy-data.pdf" class="uri">http://vita.had.co.nz/papers/tidy-data.pdf</a>)<a href="data-wrangling-part-one-1.html#fnref1" class="footnote-back">‚Ü©Ô∏é</a></p></li>
</ol>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
<script>
$( document ).ready(function() {
  var cite = ' ';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    license
  );
});
</script>

  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>5023Y</strong>: Data Science for Biologists" was written by Philip T. Leftwich. It was last built on 2022-08-03.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


</body>

</html>
